## 升级错误代码说明

获取升级代码的方法，访问操作日志，如下为例子：
Result for node software upgrade. Node uuid:D14F7216-24D8-BABF-D8B6-346E047DB4CB, name:67.87dell, IP:192.168.68.87, node IP:192.168.68.87, result code:-3202, oldver:6.0-15083, newver=6.1-30987

Result for node software upgrade. Node uuid:D14F7216-24D8-BABF-D8B6-346E047DB4CB, name:67.87dell, IP:192.168.68.87, node IP:192.168.68.87, result code:0, oldver:6.0-15083, newver=6.1-30987

| 错误代码 | 说明 | 解决办法 |
| --- | --- | --- |
| 0 | 升级成功|  |
| 3101	| 一般错误，比如消息格式错误等；|	 |
| 3102	| 命令行用法错误；|  |
| 3103	| 节点未注册，无法找到控制机地址；	|  |
| 3104	| 没有找到install.log文件，或者install.log文件中，未发现ostype行；	| 检查Windows节点etc目录下, 或者Linux节点/etc/sdata目录下的install.log文件 |
| 3105	| 没有找到version文件	| 检查Windows节点etc目录下, 或者Linux节点/etc/sdata目录下的version文件 | 
| 3106	| 打开文件失败，比如下载写入文件时，打开文件失败；比如下载成功后，读取升级包中的配置文件失败等；	| 确保磁盘空间足够 | 
| 3107	| Linux，chmod修改文件属性失败	|  |
|3108	| 升级时，移动文件失败，从日志中获取具体失败的文件；	| 需要替换的文件，其进程正在运行，无法替换；重新升级 |
| 3109	| 升级包中的描述文件file.txt格式错误；	| 检查升级包中的是否正确；如果没有问题，重新升级 |
| 3110	| HTTP下载http request初始化错误 	| CURL返回的错误，确保节点到控制机的网络正常；升级包存在；|
| 3111	| HTTP下载分配内存错误	| CURL返回的错误，确保节点到控制机的网络正常；升级包存在；|
| 3112	| HTTP下载字符串拷贝时，分配内存错误	| CURL返回的错误，确保节点到控制机的网络正常；升级包存在；|
| 3113	| HTTP URL Scheme缺失，比如缺少http://	| CURL返回的错误，确保节点到控制机的网络正常；升级包存在；|
| 3114	| HTTP URLScheme错误, 比如：ssh:// | CURL返回的错误，确保节点到控制机的网络正常；升级包存在；|
| 3115	| HTTP下载中hostname错误；	| CURL返回的错误，确保节点到控制机的网络正常；升级包存在；|
| 3116	| HTTP下载中端口错误 | CURL返回的错误，确保节点到控制机的网络正常；升级包存在；|	
| 3117	| HTTP用户名错误	 | CURL返回的错误，确保节点到控制机的网络正常；升级包存在；|
3118	Check Version返回的请求，格式错误，一般是请求失败，或者控制机的版本不对等；	控制机软件版本不对，或者控制机配置不正确
3119	控制机没有找到和节点系统对应的升级包	检查节点升级包是否存在
3120	控制机返回了错误代码，控制机返回的错误代码参考日志文件	检查控制机错误代码，根据代码检查控制机
3121	升级包中描述文件file.txt，第一行不是：[FILE_LIST]	检查升级包中的file.txt文件
3201	下载CURL初始化失败，比如链接控制机失败等；	确保节点到控制机的网络正常
3202	下载指定的文件没有找到	检查节点升级包是否存在，以及控制机的配置是否正确
3203	下载超时，升级包的下载时间最长为600秒	网络是正常
3301	File.txt描述的md5，和升级包文件计算所得的md5不一致	确保升级包来自英方
3302	升级程序权限不够	确保i2node运行必须具有管理员权限
3303	File.txt描述的文件，在升级包中未找到	确保升级包来自英方
3304	执行system失败	重新升级
3305	获取i2node安装路径失败	检查注册表
3306	升级文件时，备份原有的文件失败	重新升级
3307	从i2node.conf文件中获取mode失败	检查Windows节点etc目录下, 或者Linux节点/etc/sdata目录下的i2node.conf文件
3308	获取控制机地址失败	确保regnode.conf的cc_ip或者i2id.conf中cc_addr存在
3309	写升级日志失败	重新升级
3310	在升级失败时，需要恢复原来的文件，恢复时，缺少恢复记录文件	重新升级
3311	读取恢复记录文件失败	重新升级
3312	服务（进程）停止失败	确保i2node运行必须具有管理员权限
3313	服务（进程）启动失败	确保i2node运行必须具有管理员权限
3314	Check 最新的版本时，URL解析失败	重新升级
3315	Check 最新的版本时，解析Response失败	
3316	解析Check 最新的版本的Response，内存溢出	
3317	解析Check 最新的版本的Response，内存分配失败	
3318	I2node已经是最新版本，无需升级	无需升级
3319	升级解压缩失败	确保升级包来自英方
