# 应用高可用（High Availability） {#high-availability}

i2高可用提供应用高可用。应用高可用主要是针对各种应用提供高可用服务，监控时可以提供多条高可用规则保护，监控对象可以是主节点、从节点或者同时监控，引入了仲裁机制，避免主、从节点由于网络等原因导致错误切换等，同时将数据同步加入了高可用中，实现数据同步关联高可用，比如主节点和从节点都安装好了SQL Server 2005， 利用i2应用高可用功能实现对SQL Server 2005的高可用。当主节点监控的服务，或者进程等出现故障，主节点将成为从节点，原主节点到原从节点的关联复制规则停止，从节点升级为主节点，新主节点到新从节点的关联复制规则开启。

i2软件提供应用高可用功能，其拓扑结构如下：

![](/assets/V6.028142.png)

当主机正常工作，监控对象也没有异常表现时，由主节点对外提供服务（比如SQL Server），通过关联规则将变化的数据实时复制到从节点，高可用规则配置的监控对象保持实时监控的状态。当监控对象出现异常状态时，执行资源切换脚本，i2软件自动关闭主节点的服务（比如SQL Server），关联规则被停止，主节点切换成从节点；虚IP地址迁移到从节点，从节点启动服务，开启关联规则，此时从节点跳转为主节点，继续对外提供服务。当然现实场景中可能存在各种各样的变化，软件也为了适应各种异常操作，添加了自动切换，复制规则关联，仲裁等机制，合理配置，以满足自己的需求。

i2软件当主节点发生故障而进行切换时，主、从节点执行的切换过程如下：

![](/assets/V7.0.2018122401.png)

需要特别注意的是：

在没有配置仲裁的情况下，如果主节点和从节点之间的网络出现故障，其他网络正常时，可能在控制机界面上看到两个主节点，导致ip冲突等现象，属正常现象，避免这个现象方式是为规则设置仲裁；
设置了仲裁，如果主节点和从节点都不能连接仲裁时，心跳线中断，会导致出现两个从节点，仲裁有利有弊，配置时需要综合考虑各种场景，合理配置HA规则


 * [添加应用高可用规则](new_ha_rep.md)
 * [应用高可用规则列表](ha_management.md)
 * [HA分组切换](HA_group.md)




