## 系统参数

### 全局参数设置 {#-0}

![](/assets/201903251938.png)

* “控制台地址”：这个地址不一定是控制机本身的地址，节点通过“控制机地址”来访问控制机。

* “控制台超时时间”：超过设置的时间后会跳转到登录页面重新登录

* “状态刷新间隔”：配置界面多久更新一次状态。在网络状况不佳的情况下，这里可以选择大一点的间隔时间，如果网络状况很好，可以用默认的间隔时间。

* “列表默认记录数”：每页显示的记录条数。

* “日志保存时长”：节点/复制规则的保存时间，旧的日志将被删除，防止控制机数据库记录过多而影响访问速度。

* “消息语言”：控制机发送消息通知时，采用的语言。

### 安全设置 {#-1}

![](/assets/V7.1.2019010904.png)

* “允许尝试登陆次数”：登陆时如果用户名和密码输错的次数大于设置的参数，页面就会锁定，提示“失败锁定时间中配置的时长”之后再次登陆。

* “失败锁定时间”：用户尝试登录超过“允许尝试登陆次数”，页面锁定的时长。

* “限制密码复杂度”：此选项如果选择“是”创建用户或修改密码时会做用户密码复杂度检测，密码太简单不给注册。

* “密码长度”：创建用户或者修改密码时，必须达到设置的值时才能允许创建或者修改，否则不能提交，并给出错误提示。

* “密码有效期（天）”：设置密码多少天需要重置，过期后，登陆时需要重新设置密码。

### 邮件配置 {#-3}

![](/assets/V7.1.2019010905.png)

* “Email通知”：启用邮件通知服务。

* “SMTP的服务器地址”：SMTP的服务器地址。

* “使用SSL连接服务器”：是否使用SSL连接服务器；需要注意和SMTP服务器端口的配合。

* “开启SMTP认证”：默认需要开启，针对某些自建邮件服务器，无需SMTP认证的取消勾选。

* “SMTP的服务器端口”：通常非SSL连接和SSL连接的端口是不同的。

* “邮箱帐号”：发送邮件的帐号。

* “邮箱密码”：当用该帐号发送邮件时，SMTP服务器需要做认证。该密码用于SMTP服务器认证。

* “发送测试Email”: 利用该页面的SMTP设置，发送测试Email到当前登录用户的邮箱。当前登录用户的邮箱设置通过用户管理修改。

### 短信配置 {#-4}

![](/assets/V7.1.2019010906.png)

* “启用短信告警”：启用短信告警功能。

* “短信平台”：目前支持阿里云短信平台、华为消息通知服务、ESK平台（企信王）、太平洋证券OTO、国泰君安、国都证券、东方证券、短信猫。

注：

* 以下涉及的短信模板都需要包含这些变量：

  * ${username}：用户名，即短信中的节点/规则的创建者。
  * ${module}：模块名称，如“复制规则”。
  * ${name}：短信中的节点/规则的名称。
  * ${status}：短信中的节点/规则的状态。
  * ${relevant_res}：短信中规则的相关资源。
  * ${time}：短信发送的时间。
  
* 示例：

  * 如果模板配置为：${username}你好，${module} 功能的 ${name}，状态：${status}，时间${time}，所用节点/平台：${nodes1}，请登录控制台查看。
  * 则收到短信为：admin 你好，复制规则 功能的 规则1，状态：停止，时间 2019年1月1日11:11，所用节点/平台：节点1、节点2，请登录控制台查看。

* 阿里云

  * “APPKey”：需要在阿里大于/阿里云短信平台注册账号，在管理控制台中的应用管理中获取APPKey。
  * “SecretKey”：阿里大于/阿里云平台中，在管理控制台中的应用管理中获取SecretKey。
  * “签名名称”： 在阿里大于/阿里云的配置管理中短信通知的配置短信签名中获取签名名称。
  * “短信模板ID”：在阿里大于/阿里云的短信模板ID。

* 华为消息通知服务

  * “华为账户名”： 华为账户名（DomainName）不是用户名，获取方法：基本信息界面-&gt;管理我的凭证-&gt;查看“账号名”。
  * “所属区域”： RegionName为cn-north-1、cn-south-1 或者cn-east-2；获取地址：[https://developer.huaweicloud.com/endpoint。](https://developer.huaweicloud.com/endpoint。)
  * “主题的URN”： 主题的URN， 华为云控制台创建，urn串。
  * “短信模板ID”：华为SMN消息主题模板。

* ESK平台（企信王）、太平洋证券OTO、国泰君安、国都证券

  * “服务地址”： 格式： "SERVER\_IP:SERVER\_PORT"（例如：192.168.1.100:8080）。
  * “用户名”： 上述这些平台的用户名。
  * “密码”： 上述这些平台的登录密码。

* 东方证券

  * “服务地址”： 格式： "SERVER\_IP:SERVER\_PORT"（例如：192.168.1.100:8080）。
  * “用户名”： 东方证券短信平台用户名。
  * “密码”： 东方证券短信平台登录密码。
  * “短信模板ID”： 东方证券短信平台上配置的短信模板ID。

* 短信猫

  * “串口”：短信猫连接后，占用的串口号。Windows下用COMn，例如：COM1 (Linux下也可以用，COM1表示/dev/ttyS0)。
  * “波特率”：默认9600，不用修改，短信测试异常可以调整该值。Windows可以在串口属性中设置和查看。
  * 针对无法访问外网的用户，可以使用短信猫来接收短信告警通知。
  * 注：需要在控制机上通过串口连接短信猫设备。短信猫型号：目前仅支持JYC311-232。

**备注：**

华为消息通知服务，不是简单的SMS服务。需要先创建一个主题，所有的应用都可以发消息给这个主题，主题会通知到“订阅者”；所以和企业版现有的控制台的SMS以及通知有点不一样，需要在华为的控制台里创建主题并添加订阅。

如下是**华为消息通知服务**设置的主要步骤：

* 先创建一个主题：
  ![](/assets/CatchB8B5%2805-28-18-30-30%29.jpg)

![](/assets/Catch0294%2805-28-18-30-30%29.jpg)

* 再创建一个模板，类型选择短信；华为要求同时创建一个协议为Default的同名的模板：
  ![](/assets/Catch8F04%2805-28-18-30-30%29.jpg)

* 再添加订阅，这里协议可以选择短信和邮件以及其他的：
  ![](/assets/Catch0294%2805-28-18-30-30%29.jpg)

如下是**阿里云**获取信息

如下是具体的appkey、SecretKey获取:

![](/assets/V6.118042602.png)

如下是签名名称、短信模板ID:

![](/assets/V6.118042603.png)

### 特殊参数 {#-6}

![](/assets/V7.1.2019010907.png)

* “忽略镜像设置”：开启时会在创建复制规则时镜像设置中有跳过镜像设置。

* “在线升级”： 允许节点在线升级。

勾选忽略镜像配置项，在新建复制规则时，镜像设置Tab页会增加“跳过镜像”选项，如下：

![](/assets/V7.1.2019010908.png)

